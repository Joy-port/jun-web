let data =[
    {
        title: "icon 網站大集合",
        description: "你知道 icon 有分很多類型嗎？外框線、色塊、混合、等等，但要怎麼依照自己的需求尋找 icon？文章整理不同網站的特色，分成單色、彩色、可不可以編輯，及不同主題的 icon，趕快來找找看有沒有你想要的icon！",
        type: ["資源整理"],
        time: '2020-04-01',
        imgUrl:"https://images.unsplash.com/photo-1471897488648-5eae4ac6686b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80",
        tagsByTheme:["設計"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "色票、配色網站",
        description: "配色網站這麼多，怎麼選？選能夠幫上你的那一個！讓不懂配色理論的你也能選對顏色！如果你只需要兩個顏色搭配，就不要找提供五個顏色的色票網站，那會讓你更難做出選擇～以下幫你整理了多色色票、漸層色、以及可以依照色彩理論自訂顏色的網站，來看看哪個用起來比較順手吧！",
        type: ["資源整理"],
        time: '2020-04-17',
        imgUrl:"https://images.unsplash.com/flagged/1/apple-gear-looking-pretty.jpg?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
        tagsByTheme:["設計"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "UI/UX 設計參考網站",
        description: "針對 UI/UX 設計，這些網站有很豐富的設計作品，能培養你的美感，也能幫助你在沒有想法的時候帶給你一些靈感。對於想自學的人，多看好作品也能讓你有更高的設計敏感度。沒事就來逛逛資料庫、尋找好設計吧！",
        type: ["資源整理"],
        time: '2020-04-18',
        imgUrl:"https://images.unsplash.com/45/QDSMoAMTYaZoXpcwBjsL__DSC0104-1.jpg?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1776&q=80",
        tagsByTheme:["設計"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "簡報設計學習資源",
        description: "在製作簡報時，素材網站可以節省很多時間，救急的時候能幫上一些忙。但若真的想精進簡報設計，則需要平常累積對設計的敏感度，也需要對製作工具有一定的熟練程度。以下整理了 12 個分享簡報設計知識及技巧的部落格和 FB 粉專。",
        type: ["資源整理"],
        time: '2021-10-12',
        imgUrl:"https://images.unsplash.com/photo-1492551557933-34265f7af79e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
        tagsByTheme:["設計"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "資料視覺化／資訊圖表參考與製作網站",
        description: "圖表分成兩種，一種是有原始數據的「數據圖表」，目的是將資料用視覺化的方式，讓人更好理解數據，並得以從數據中得出有意義的訊息；一種是有經過整理的「資訊圖表」，但可能沒有最原始的數據，目的是用圖像的方式傳遞明確的訊息。",
        type: ["資源整理"],
        time: '2020-04-01',
        imgUrl:"https://images.unsplash.com/photo-1461773518188-b3e86f98242f?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1769&q=80",
        tagsByTheme:["設計"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "線上課程、免費資源整理",
        description: "疫情影響，一瞬間，線上學習成為很重要的自學管道。除了知識的學習，還有很多人文體驗都被搬到了線上，博物館、音樂劇…通通有，一起來看看吧！",
        type: ["資源整理"],
        time: '2020-03-27',
        imgUrl:"https://images.unsplash.com/photo-1495465798138-718f86d1a4bc?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
        tagsByTheme:[],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "Notion 筆記軟體教學資源",
        description: "大家都說好用的 Notion 到底怎麼用？看完一堆教學文章，還是有點不知道怎麼將功能發揮到極致？看看這些大神怎麼透過 Notion，建立屬於自己的工作系統，再去截取適合自己的部分，才能真的把 Notion 學到精通！有了這些實例，再去詳細探究功能，學習的速度也會更快！",
        type: ["資源整理"],
        time: '2021-01-29',
        imgUrl:"https://images.unsplash.com/photo-1453928582365-b6ad33cbcf64?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1773&q=80",
        tagsByTheme:["Notion"],
        tagsByContent:"文章",
        linkUrl:""
    },
    
    {
        title: "Notion+ 標記管理器，快速匯出筆記重點",
        description: "在找跟 Notion 相關的 chrome 擴充功能時，意外發現這款很特別的標記工具，可以截取你用顏色畫重點的文字和區塊，書籍重點摘要、課程重點回顧、文章重點整理通通可以快速匯出！以下是功能的簡單介紹和運用情境舉例，分享給大家～",
        type: ["資源整理"],
        time: '2021-05-12',
        imgUrl:"https://images.unsplash.com/photo-1555707813-dc14c22ae471?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1771&q=80",
        tagsByTheme:["Notion"],
        tagsByContent:"文章",
        linkUrl:""
    },
    
    {
        title: "看影片要怎麼學英文？",
        description: "你也覺得學英文很無聊，很沒有動力嗎？來看看我是怎麼透過影片學英文吧！",
        type: ["資源整理"],
        time: '2020-04-23',
        imgUrl:"https://images.unsplash.com/photo-1488190211105-8b0e65b80b4e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
        tagsByTheme:["英文學習"],
        tagsByContent:"文章",
        linkUrl:""
    },
    
    {
        title: "｜雅思讀書計畫｜書籍推薦｜",
        description: "準備雅思，我第一個想到的事情是買參考書，但我發現這只是一個「做好準備的假象」，買了書但沒有讀書計畫也沒辦法開始準備。要考雅思必須一步一步，從訂定適合自己的讀書計畫開始。想自學考雅思，跟著這 7 個步驟來準備吧～",
        type: ["資源整理"],
        time: '2020-04-27',
        imgUrl:"https://images.unsplash.com/photo-1497633762265-9d179a990aa6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1773&q=80",
        tagsByTheme:["英文學習"],
        tagsByContent:"文章",
        linkUrl:""
    },
    
    {
        title: "｜實用網站｜推薦書單｜考試報名資訊｜放榜資訊｜",
        description: "準備建築師考試，大部分的人會直接選擇報名補習班（如實力、九華……），省下整理考試內容的時間，但費用也不便宜。文章整理了實用的網站和推薦書籍，讓你不靠補習班也能省下時間省下錢。",
        type: ["資源整理","建築專區"],
        time: '2020-03-24',
        imgUrl:"https://images.unsplash.com/photo-1480714378408-67cf0d13bc1b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxjb2xsZWN0aW9uLXBhZ2V8MTB8aGNmcTBVMHAzNWd8fGVufDB8fHx8&auto=format&fit=crop&w=700&q=60",
        tagsByTheme:["建築資源","建築師考試"],
        tagsByContent:"文章",
        linkUrl:""
    },
    
    {
        title: "台灣建築書店有哪些",
        description: "博客來的「藝術設計類」>>「建築」怎麼那麼少書？每次去書店尋找「建築」類都找不到你要的書？那是因為你找錯地方了！要找建築的書就要去「建築書店」！來看看以下這幾間書店吧！",
        type: ["資源整理","建築專區"],
        time: '2020-04-24',
        imgUrl:"https://images.unsplash.com/photo-1589085947445-a491beee038d?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
        tagsByTheme:["建築資源"],
        tagsByContent:"文章",
        linkUrl:""
    },
    
    {
        title: "2020 建築畢業設計展，全台各校展期彙整",
        description: "又到了建築系畢業展覽的季節，以下整理各校建築系的總評、展覽日期及地點。實踐、中原、文化、高大、大葉、朝陽、中華、銘傳、中國科大、成大、台科、逢甲、北科、金大、聯合、淡江、東海",
        type: ["資源整理","建築專區"],
        time: '2020-05-05',
        imgUrl:"https://images.unsplash.com/photo-1572053675669-036f6b9232fd?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80",
        tagsByTheme:["建築資源"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "30 個優質建築新聞網站",
        description: "你腦中浮現的第一個一定是 archdaily 吧！但第二個呢？第三個呢？archdaily 雖然資料庫很大，但有些建築類別或地區的案例很少。這些網站有豐富的案例",
        type: ["資源整理","建築專區"],
        time: '2020-05-20',
        imgUrl:"https://images.unsplash.com/photo-1520330979108-7d66e04b35e5?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=928&q=80",
        tagsByTheme:["建築資源"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "6 個聊建築、聊設計的 Podcast",
        description: "離島人 Humans Offshore、建人五四三、Z剖面 建築談、字型腦補 A Knob of Font、嚼嚼設計 Design chew chew、WOW!建築Amazing architecture",
        type: ["資源整理","建築專區"],
        time: '2020-06-05',
        imgUrl:"https://images.unsplash.com/photo-1605028241606-ca01277aa15c?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=930&q=80",
        tagsByTheme:["建築資源"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "建築相關活動的 11 個資訊來源",
        description: "欣講堂、忠泰集團、築生文化協會、空總臺灣當代文化實驗場 C-LAB、交大建築所、成大建築演講股、實構築、臺北市立美術館",
        type: ["資源整理","建築專區"],
        time: '2020-06-10',
        imgUrl:"https://images.unsplash.com/photo-1499092346589-b9b6be3e94b2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1771&q=80",
        tagsByTheme:["建築資源"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "2021 建築畢業設計展，全台各校展期彙整",
        description: "又到了建築系畢業展覽的季節，以下整理各校建築系的總評、展覽日期及地點。中原建築、中華建築、北科建築、大葉大學空間設計系、實踐建築、成大建築、文化建築、朝陽科大建築系建築組、東海建築、 淡江建築、聯合建築 臺科建築、逢甲建築、金門大學建築系、銘傳建築、高大建築……（疫情將影響展覽的舉行，持續更新）",
        type: ["資源整理","建築專區"],
        time: '2020-05-14',
        imgUrl:"https://images.unsplash.com/photo-1467226632440-65f0b4957563?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1574&q=80",
        tagsByTheme:["建築資源"],
        tagsByContent:"文章",
        linkUrl:""
        
    },
    {
        title: "建築師考試法規心智圖整理",
        description: "不用再啃厚厚的講義、輕易找到題目出處與解答、標示常考的法律條文",
        type: ["資源整理","建築專區"],
        time: '2020-05-14',
        imgUrl:"https://images.unsplash.com/photo-1480714378408-67cf0d13bc1b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
        tagsByTheme:["建築資源","建築師考試"],
        tagsByContent:"心智圖",
        linkUrl:"https://junlearning.ck.page/lawnotes"
    },
    {
        title: "轉捩點不是單一個重要的事件，而是一段時間的轉變",
        description: "是什麼造就了今天的你？有什麼重大的選擇讓你的生活產生巨大改變？回想過去的日子，我好像沒辦法明確指出，是什麼單一事件讓我成為現在的樣子，但我可以說",
        type: ["學習思考"],
        time: '2020-06-26',
        imgUrl:"https://images.unsplash.com/photo-1500989145603-8e7ef71d639e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1776&q=80",
        tagsByTheme:["職涯思考"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "心智圖也能拿來探索職涯",
        description: "很少主動去認識別人，但這次認識荃鈺之後，我深刻體會到如果願意跟不同的人交流，會有很不一樣的收穫。",
        type:["學習思考"],
        time: '2020-06-26',
        imgUrl:"https://images.unsplash.com/photo-1592819695396-064b9572a660?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
        tagsByTheme:["職涯思考"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "錢要花在刀口上，那買什麼才算是高效益的？",
        description: "今天聽到一集 podcast，大人的 small talk EP99，標題是「媽媽都說錢要花在「刀口上」，那「刀口」到底在哪裡呢？」，雖然這是很主觀的價值觀選擇，但也給了我很多啟發，在這裡記錄一些想法分享給大家。",
        type:["學習思考"],
        time: '2020-11-10',
        imgUrl:"https://images.unsplash.com/photo-1531346878377-a5be20888e57?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80",
        tagsByTheme:["自我成長"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "關於口語表達，有些答案不必向外求",
        description: "向外搜尋解答可以解決一半的問題​，還有另一半是無法透過外求解決的問題",
        type:["學習思考"],
        time: '2021-06-04',
        imgUrl:"https://images.unsplash.com/photo-1488190211105-8b0e65b80b4e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770&q=80",
        tagsByTheme:["自我成長"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "關於寫作，應該要先學還是先寫？",
        description: "如果你也想開始學習寫作，我認為最好的方式是",
        type:["學習思考"],
        time: '2021-06-06',
        imgUrl:"https://images.unsplash.com/photo-1501618669935-18b6ecb13d6d?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1749&q=80",
        tagsByTheme:["寫作"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "忘形流，是架構重要還是心法重要？",
        description: "真如期待，再加上一點意料之外​，在邊玩邊學的過程又得到新啟發​​！上完課後，整理出三個對製作簡報的反思，也分享給大家～",
        type:["學習思考"],
        time: '2021-06-15',
        imgUrl:"https://images.unsplash.com/photo-1517971071642-34a2d3ecc9cd?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=776&q=80",
        tagsByTheme:["學習方法"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "思維框架怎麼學？",
        description: "《超速思維》讀書會心得分享主辦單位：CMX 給社群經理的社群 想學思維框架，先想想哲學三問 有這麼多",
        type:["學習思考"],
        time: '2021-07-31',
        imgUrl:"https://images.unsplash.com/photo-1574421233009-a6d13da3b5a3?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1769&q=80",
        tagsByTheme:["學習方法"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "從《機智醫生生活》看想成為的大人",
        description: "最近深刻體會到，看韓劇絕對不是浪費時間的一件事！ 看韓劇有趣的地方跟看書一樣，都是透過別人的眼睛去理解不同的生活，而影片的呈現，更能讓人將自己投射其中。",
        type:["學習思考"],
        time: '2021-08-11',
        imgUrl:"https://i2.wp.com/junlearning.com/wp-content/uploads/2021/08/97421060_2621642168124981_7721735136688996352_n.jpg?resize=690%2C550&ssl=1",
        tagsByTheme:["自我成長"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "《B型選擇》你永遠都有選擇",
        description: "很多時候，我們都會認為自己只有一種選擇，比如說畢業後只能趕快找工作，找到工作之後只能趕快想辦法拚升遷、拚加薪，但除了這些選擇以外，其實還有各種不同的可能。",
        type:["學習思考","好書推薦"],
        time: '2021-09-23',
        imgUrl:"https://images.unsplash.com/photo-1531347118459-c3ea7a5ac61e?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=772&q=80",
        tagsByTheme:["職涯思考","學習方法"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "《設計生意經》會做設計，還不足以讓你養活自己！",
        description: "懂得經營和了解設計同等重要。設計美麗的東西是一種藝術，但能從中找到獲利的空間，則是一種技能。了解營運一家公司的各種面向，才能讓你更自由的去做設計。",
        type:["好書推薦"],
        time: '2020-04-15',
        imgUrl:"",
        tagsByTheme:["設計","學習方法"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "《精準成長》",
        description: "反思才會成長！如果沒有經過反思，所有的努力不一定能成為你學習的養分，花下的時間也不一定能讓你發揮最大的潛力。想要成長，你必須學會有意地暫停，理解經驗帶給你的啟發，才能從人生體驗當中學到東西。",
        type:["學習思考","好書推薦"],
        time: '2020-08-09',
        imgUrl:"",
        tagsByTheme:["學習方法"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "《清單革命》",
        description: "不犯錯的秘密武器！清單不能教會我們專業知識，但清單能幫助我們免於犯錯。就像一個機器需要零件，但如果沒有好的系統，也無法讓零件發揮效用，我們光擁有知識還不夠，清單就是能幫助我們有效運用知識的系統。",
        type:["學習思考","好書推薦"],
        time: '2020-09-27',
        imgUrl:"",
        tagsByTheme:["學習方法"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "《最高學習法》",
        description: "想學會「教」，就要先知道怎麼「學」。透過了解大腦的運作，學著如何順著天性，更有效率地學習，也學著如何克服本能，選擇更有成效的方式教學。",
        type:["學習思考","好書推薦"],
        time: '2021-10-01',
        imgUrl:"",
        tagsByTheme:["學習方法","自我成長"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "《高績效心智》我要好好工作，然後空出更多時間好好生活！",
        description: "作者把如何成功的重點放在「看待事情的角度」之上，是一本心態和方法並重的書，不只用扎實的理論基礎告訴你「為什麼」，也用各式各樣的例子和實踐方法告訴你「怎麼做」。書中不斷提及的「心智」，指的就是面對事情心態",
        type:["學習思考","好書推薦"],
        time: '2021-05-28',
        imgUrl:"",
        tagsByTheme:["職涯思考","學習方法","自我成長"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "怎麼達到工作與生活的平衡？",
        description: "工作與生活的平衡，是大多數人追求的，可是什麼是平衡？你如何定義「平衡」？",
        type:["學習思考","好書推薦"],
        time: '2021-06-24',
        imgUrl:"",
        tagsByTheme:["職涯思考","自我成長"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "【讀書筆記】看完《搞定》，待辦事項就被搞定了！",
        description: "遠距在家忙到生活失衡？《搞定》教你管理自己的行動，就會自然而然地做好時間管理了！",
        type:["學習思考","好書推薦"],
        time: '2021-07-03',
        imgUrl:"",
        tagsByTheme:["職涯思考","學習方法"],
        tagsByContent:"文章",
        linkUrl:""
    },
    {
        title: "《統計學，最強的商業武器》統計學與統計思維 #還是初學者",
        description: "第一次接觸統計思維，是在 2020 年商業思維學院裡劉奕酉老師的一堂課，那是我第一次用「思維」的角度理解一個學門，也讓我開始想更深入了解統計學。這堂課不只是教統計概念，也帶給我很多想法上的轉變",
        type:["學習思考","好書推薦"],
        time: '2021-07-31',
        imgUrl:"",
        tagsByTheme:["學習方法","自我成長"],
        tagsByContent:"文章",
        linkUrl:""
    }
];
let pageData = [];
let themeData = [];
let contentData = [];
let pageName = '';
let sortType = 'timeSort';

//預設渲染畫面
function init(){
    setDataId(); //將資料綁定id 根據時間
    autoRenderByPage();
}

init();

//綁定id
function setDataId(){
let num = 0;
    data.forEach(function(item){
        let year = Number(item.time.split('-')[0]);
        let month = Number(item.time.split('-')[1]) - 1;
        let day = Number(item.time.split('-')[2]);

        let time = new Date(year, month ,day).getTime();
        num += .2; //避免重複
        time += num;
        item.id = time ;
    });

}

//根據頁面顯示資料
function autoRenderByPage(){
    if (document.querySelector('.js-content-list')){
            renderContentList(); //渲染卡片資料
        if(document.querySelectorAll('.js-tags-list')){
            renderTagsList(); //渲染標籤數量＋disabled
        };
    }
}

//渲染卡片
function renderContentList(){
    const contentList = document.querySelector('.js-content-list');
    let str ='';

    if(!contentList.dataset.listType) return ;

    getPageData(contentList);
    //依照時間排序
    if(sortType === 'timeSort'){
        sortByTime(pageData,sortType);
    }else{
        console.log( sortType,'hot');
    };
    str = renderCardsList(pageData);
    contentList.innerHTML = str;
}

//篩選後重新渲染card
function updateContentList(inputData){
    const contentList = document.querySelector('.js-content-list');
    let str ='';
    str = renderCardsList(inputData);
    contentList.innerHTML = str;
}

//渲染tags 標籤＋disable 效果 + 綁監聽
function renderTagsList(){
    const theme = document.querySelector('.js-tags-list[data-tags-type="theme"]');
    const content = document.querySelector('.js-tags-list[data-tags-type="content"]');
    theme.addEventListener('change', checkboxSelected);
    content.addEventListener('change', checkboxSelected);

    //更新theme 標籤 disabled 樣式
    theme.querySelectorAll('li input').forEach(inputItem =>{
        inputItem.setAttribute('disabled', '')
            pageData.forEach(item =>{
                item.tagsByTheme.forEach(themeName =>{
                    if(themeName === inputItem.name){
                        inputItem.removeAttribute('disabled', '');
                        inputItem.dataset.num ++ ;
                    }
                })
            })
        
    });

    //更新theme 標籤 數量
    theme.querySelectorAll('li input').forEach(inputItem=>{
        theme.querySelectorAll('li label').forEach(labelItem =>{
            if(labelItem.getAttribute('for') === inputItem.getAttribute('id')){
                labelItem.querySelector('span').textContent = inputItem.dataset.num;
            };
        });
    })

    //更新content 標籤 disabled 樣式
    content.querySelectorAll('li input').forEach(inputItem =>{
        inputItem.setAttribute('disabled', '')
            pageData.forEach(item =>{
                if(item.tagsByContent === inputItem.name){
                    inputItem.removeAttribute('disabled', '');
                    inputItem.dataset.num ++ ;
                }
            })
    });

    //更新content 標籤 數量
    content.querySelectorAll('li input').forEach(inputItem=>{
        content.querySelectorAll('li label').forEach(labelItem =>{
            if(labelItem.getAttribute('for') === inputItem.getAttribute('id')){
                labelItem.querySelector('span').textContent = inputItem.dataset.num;
            };
        });
    })
}

function updateContentTagsList(inputData){
    const content = document.querySelector('.js-tags-list[data-tags-type="content"]');
     //更新content 標籤 數量dataset
     let num = 0;
     content.querySelectorAll('li input').forEach(inputItem =>{
        inputItem.dataset.num = 0 ;
            inputData.forEach(item =>{
                if(item.tagsByContent === inputItem.name){
                    inputItem.dataset.num  ++ ;
                }
            })
    });
      //更新content 標籤 數量
      content.querySelectorAll('li input').forEach(inputItem=>{
        content.querySelectorAll('li label').forEach(labelItem =>{
            if(labelItem.getAttribute('for') === inputItem.getAttribute('id')){
                labelItem.querySelector('span').textContent = inputItem.dataset.num;
            };
        });
    })
}

//get pageData
function getPageData(contentList){
    switch(contentList.dataset.listType){
        case 'all':
        pageName = 'all';
        pageData = data;
        break;  
        case 'learning':
        pageName = 'learning';
        pageData = data.filter(item => item.type[(item.type.findIndex(typename=> typename === '學習思考'))] === '學習思考');
        break;
        case 'architecture':
        pageName = 'architecture';
        pageData = data.filter(item => item.type[(item.type.findIndex(typename=> typename === '建築專區'))] === '建築專區');
        break;
        case 'infoMap':
        pageName = 'infoMap';
        pageData = data.filter(item => item.type[(item.type.findIndex(typename=> typename === '資源整理'))] === '資源整理');
        break;
        case 'library':
        pageName = 'library';
        pageData = data.filter(item => item.type[(item.type.findIndex(typename=> typename === '好書推薦'))] === '好書推薦');
        break;
     }

}
//renderCards
function renderCardsList(pageData){
    let str ='';
    if(pageName === 'library'){
        str = libraryCardList(pageData);
    }else if(pageName === 'newPosts'){
        str = newPostCardList();
    }else{
        str = normalCardList(pageData);
    };
    return str ;
}

//normal content Card list
function normalCardList(pageData){
    let str ='';
    pageData.forEach(item =>{
        //要加上 item.time 排序時間
        let content=`<li class="col-8 mx-auto mx-md-0 col-md-6 col-lg-4 mb-8 mb-md-13 px-lg-8" data-tags-theme="${item.tagsByTheme.join('_')} data-tags-content="${item.tagsByContent}>
        <div class="card content-card h-100">
          <a href="${item.linkUrl}" class="d-block">
            <img src="${item.imgUrl.length === 0 ? 'https://images.unsplash.com/photo-1546853020-ca4909aef454?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb&ixid=eyJhcHBfaWQiOjE0NTg5fQ': item.imgUrl}" alt="card img" class="card-img-top content-card-img-top">
          </a>
          <div class="py-5 px-6 h-100">
            <h3 class="hide-row-2 fs-7 text-primary fw-md mb-2">${item.title}<span class="text-gray-500 fw-normal fs-9 ms-3"> ${regTime(item.time)}</span></h3> 
            <p class="text-secondary hide-row-2 fs-8">${item.description}</p>
          </div>
        </div>
      </li>`;
      str += content;
    });

    return str ;
}
//library content Card list
function libraryCardList(pageData) {
    let str = '';
    pageData.forEach(item =>{
        let content=` <li class="col-8 mx-auto mx-md-0 col-md-6 col-lg-4 mb-8 mb-md-13 px-lg-8" data-tags-theme="${item.tagsByTheme.join('_')} data-tags-content="${item.tagsByContent}>
        <div class="card content-card h-100">
          <!-- 用來開啟modal 內的carousel -->
          <!--  alt="First slide" data-bs-target="#carouselExample" data-bs-slide-to="0" -->
          <a
            href="${item.linkUrl}"
            class="d-block"
            data-bs-toggle="modal"
            data-bs-target="#libraryContentModal"
          >
            <img
              src="${item.imgUrl.length === 0 ? 'https://images.unsplash.com/photo-1546853020-ca4909aef454?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb&ixid=eyJhcHBfaWQiOjE0NTg5fQ': item.imgUrl}"
              alt="card img"
              class="card-img-top content-card-img-top card-inside-img"
            />
          </a>
          <div class="py-3 px-5 h-100">
            <h3 class="hide-row-2 fs-6 text-primary fw-bold mb-2">
            ${item.title}
            </h3>
            <p class="text-secondary hide-row-2">
            ${item.description}
            </p>
          </div>
        </div>
      </li>`;
      str += content;
    });

    return str ;
}

//newPost content Card list
function newPostCardList(){

}

//渲染調整時間顯示方式
//顯示上架距離現今的時間
function regTime(time){
    let year = time.split('-')[0];
    let month = time.split('-')[1];
    let day = time.split('-')[2];

    let nowYear = new Date().getFullYear();
    let nowMonth = ((new Date().getMonth() )+ 1 < 10 ? '0': '') + (new Date().getMonth() + 1);
    let nowDay = (new Date().getUTCDate()<10 ? '0' : '') + new Date().getDate();

    if( nowYear - year > 0){
    if( nowMonth - month >= 0){
        return `${nowYear - year} 年前`;
    }else if(nowMonth - month < 0 ){
        return `(${(12- month)+ nowMonth} 個月前`;
    };
    }else if (nowYear - year === 0){
        if(nowMonth - month > 0){
            return `${nowMonth - month} 個月前`;
        }else if(nowMonth - month === 0 ){
            return `${nowDay - day} 天前`;
        };
    };

}

//依照上架順序排序
// 依照上架日期排序
function sortByTime(inputData,sortType){
    inputData.forEach(function(item){
        let nowTime = new Date().getTime();
        item[sortType] = nowTime - item.id;
    });

     inputData.sort((a,b)=> { return a[sortType] - b[sortType]});
}

//tags 篩選資料
function checkboxSelected(e){
   if(this.dataset.tagsType === 'theme'){
    if(e.target.closest('input').checked===true){
        pageData.forEach((item) => {
            item.tagsByTheme.forEach(tagsName =>{
                if(tagsName === e.target.name){
                    themeData.unshift(item);
                };
            })
        });
        //刪除重複的項目
        let newThemeData = new Set(themeData);
        themeData = [...newThemeData];

   }else if(e.target.closest('input').checked === false){
    //刪除點擊取消的tags  
   themeData.forEach(function(updateType){
      updateType.tagsByTheme.forEach(updateTagsName =>{
          if(e.target.name === updateTagsName){
          themeData.splice(themeData.indexOf(updateType),e.target.dataset.num);
          }
      })
  });
  
}
    updateContentList(themeData);
    updateContentTagsList(themeData);
    addClickCheckboxStyle(this);
}else if(this.dataset.tagsType === 'content'){
    if(e.target.closest('input').checked===true){
        themeData.forEach((item) => {
            if(item.tagsByContent === e.target.name){
                contentData.unshift(item);
            };
        });
    }else if(e.target.closest('input').checked === false){
        contentData.forEach(function(updateType){
            if(e.target.name === updateType.tagsByContent){
                contentData.splice(contentData.indexOf(updateType),e.target.dataset.num);
            }
        });
    }
    updateContentList(contentData);
    addClickCheckboxStyle(this);
} 

}

function addClickCheckboxStyle(vm){
    const themeTitle = document.querySelector('[data-title="theme"]');
    const contentTitle = document.querySelector('[data-title= "content"]');
    vm.querySelectorAll('li input').forEach(inputItem=>{
        if(inputItem.checked === true){
            num++;
        };
    });


    if(num1 >0){
        themeTitle.classList.remove('link-secondary');
    }else{
        themeTitle.classList.add('link-secondary');
    };
    if(num2 >0){
        contentTitle.classList.remove('link-secondary');
    }else{
        contentTitle.classList.add('link-secondary');
    }

}